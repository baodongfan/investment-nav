@import "tailwindcss";
@plugin "@tailwindcss/typography";

/* 核心修复：强制 dark: 前缀监听类名 */
@custom-variant dark (&:where(.dark, .dark *));

/* 1. 默认模式（亮色） */
:root {
  /* 背景稍微带一点点冷色调，不完全是纯白，更护眼 */
  --background: #ffffff; 
  --foreground: #0f172a; /* Slate-900 */
  --sidebar-width: 16rem;
  
  /* 排版颜色 */
  --tw-prose-body: #334155;        /* Slate-700 */
  --tw-prose-headings: #0f172a;    /* Slate-900 */
  --tw-prose-links: #7c3aed;       /* Violet-600 (链接变紫色) */
  --tw-prose-quotes: #475569;      /* Slate-600 */
  --tw-prose-code: #d946ef;        /* Fuchsia-500 (代码高亮更骚气) */
  --tw-prose-pre-bg: #1e293b;      /* Slate-800 */
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  
  /* 定义更现代的字体栈 */
  --font-sans: "Plus Jakarta Sans", "Inter", "Noto Sans SC", "PingFang SC", sans-serif;
  --font-serif: "Noto Serif SC", "Songti SC", serif;
  --font-mono: "JetBrains Mono", monospace;
}

/* 2. 暗黑模式（高级深蓝灰） */
.dark {
  --background: #020617; /* Slate-950 (比纯黑更有质感) */
  --foreground: #f1f5f9; /* Slate-100 */
  
  --tw-prose-body: #cbd5e1;        /* Slate-300 */
  --tw-prose-headings: #f8fafc;    /* Slate-50 */
  --tw-prose-links: #a78bfa;       /* Violet-400 */
  --tw-prose-quotes: #94a3b8;      /* Slate-400 */
  --tw-prose-code: #e879f9;        /* Fuchsia-400 */
  --tw-prose-pre-bg: #0f172a;      /* Slate-900 */
}

/* 全局样式微调 */
body {
  background: var(--background);
  color: var(--foreground);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
}

/* 选中文字的颜色（点睛之笔） */
::selection {
  background-color: #a78bfa; /* Violet-400 */
  color: #fff;
}

/* 侧边栏动画 */
.sidebar {
  overflow: hidden;
  min-width: 4rem;
  transition: width 300ms cubic-bezier(0.4, 0, 0.2, 1); /* 更平滑的动画曲线 */
  will-change: width;
  border-right: 1px solid rgba(0,0,0,0.05); /* 超细边框 */
}
.dark .sidebar {
  border-right: 1px solid rgba(255,255,255,0.05);
}

@media (min-width: 768px) {
  .with-sidebar {
    margin-left: var(--sidebar-width);
    transition: margin-left 300ms cubic-bezier(0.4, 0, 0.2, 1);
  }
}

/* --- 排版美化 (Prose) --- */
.prose a {
  text-decoration: none;
  font-weight: 600;
  transition: all 0.2s;
  border-bottom: 1px solid transparent;
}
.prose a:hover {
  color: #8b5cf6; /* Violet-500 */
  border-bottom-color: #8b5cf6;
}

.prose img {
  border-radius: 0.75rem; /* 圆角更大 */
  box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

.prose blockquote {
  font-style: normal;
  border-left-width: 4px;
  border-left-color: #8b5cf6; /* 紫色竖线 */
  background: linear-gradient(to right, rgba(139, 92, 246, 0.1), transparent); /* 渐变背景 */
  padding: 1rem 1.5rem;
  border-radius: 0.5rem;
}

